---
title: "Final Project Storyboard"
output: 
  flexdashboard::flex_dashboard:
   storyboard: true
---

```{r echo=FALSE, message=FALSE}
library(flexdashboard)
library(plotly)
```

### Introduction

|   Often people look to date in hopes of finding their perfect match. Being that we are living in technology-centered days, one of the most common methods of hopefully finding true love or just simply pushing themselves out of their comfort zone and meeting new people is through a method called speed dating. Speed dating events are usually hosted in public places like local bars and restaurants where everyone gets a limited amount of time to socialize and get to know the other participants of the event. If there is chemistry, in other words, if the two participants find commonality and bond, it incites interest in future dates together. The "speed" element is that participants are limited to a short amount of time to converse. When the time is completed, they must switch to converse with the next person (Asendorpf 2011).
|   Analyzing speed dating data is important because these analyses can identify the impacts of social cues, initial attraction, and connection through shared interests on the probability of finding a match. Additionally, analysis of speed dating data has been proven as more reliable in comparison to data gathered through other dating tactics (Houser 2008), and allows the separation of effects of general behavior, change in behavior during dating, and combination effects (Asendorf 2011).

#### Sources

| Asendorpf, Jens B., Lars Penke, and Mitja D. Back. 2011. "From Dating to Mating and Relating: Predictors of Initial and Long-Term Outcomes of Speed-Dating in a Community Sample." European Journal of Personality, 25: 16--30. https://doi.org/10.1002/per.768.
| Houser, Marian L., Sean M. Horan, and Lisa A. Furler. 2008. "Dating in the Fast Lane: How Communication Predicts Speed-Dating Success." Journal of Social and Personal Relationships, 25: 749--68. https://doi.org/10.1177/0265407508093787.

### Speed Dating Data

| The speed dating dataset we use here was originally collected for Fisman et al. (2006), where participants signed up for a speed dating study where they completed an initial questionnaire prior to the speed dating event including demographics, preferences, and expected outcomes; a questionnaire for each potential match they met indicating their impression of their partner and whether thay would like to match with them; and questionnaires the day after and 2-3 weeks after the event answering questiona about their matching experience.

#### Sources

| https://www.kaggle.com/datasets/annavictoria/speed-dating-experiment
| Fisman, Raymond, Sheens S. Iyengar, Emir Kamencia, and Itamar Simonson. 2006. "Gender
| Differences in Mate Selection: Evidence From a Speed Dating Experiment." The Quarterly Journal of Economics 121 (2): 673-97. doi: 10.1162/qjec.2006.121.2.673

#### Summary

```{r echo=FALSE, message=FALSE}
data_path <- "speed_dating_data.csv"
spddat <- read.csv(data_path)

# show data summary
summary(spddat)
```

------------------------------------------------------------------------

### Data showcase 1: Chance of Matching Based On Social Factors

#### Visualization

<iframe width="800" height="600" src="https://eliannaevans.shinyapps.io/projectPlot1" frameborder="0" allowfullscreen>

</iframe>

#### Narrative

|   Field of study seems to affect the chance of matching; Economic Political and Policy Sciences (EPPS) majors have the highest chance and Engineering and Computer Science (ECS) majors have the lowest chance. Unexpectedly, EPPS majors do not continue this lead for the chance of partner pursuing a match, taking a middle rank with Jindal School of Management (JSOM) at the highest chance of partner pursuing a match, implying that they have a lower chance of pursuing a match themselves. Brain and Behavioral Science (BBS) majors are most likely to pursue a match, while Arts Humanities and Technology (ATEC/A&H) are least likely to pursue a match. Including gender as a factor shows that men majoring in BBS are more likely than women in their major to match, and the most likely to match of any gender-major combination, while men majoring in ECS are least likely to match. Including same race as a factor show that ECS, EPPS, JSOM, and other majors are more likely to match with someone of the same race or ethnicity, while ATEC/A&H, BBS, and Natural Science and Mathematics (NSM) majors are more likely to match with someone of a different race or ethnicity.

|   Goal of speed dating also affects the change of matching: those with the goal of "to say I did it" were most likely to match. Still, none of them matched with 50% or more of their partners, while those with the goal of starting a relationship were the least likely to match but contained the participant who matched with the greatest percentage of their partners. These findings are similar for chance of partner pursuing match, however, those with the goal of getting a date were most likely to pursue a match. Controlling for gender, men seem more likely to match than women except for women with the goal of "to say I did it," who have the highest chance of matching of any gender-goal pairing. Looking at race and ethnicity, participants with the goal of "to say I did it" of the same race as their partner were most likely to match at almost 25%.

|   How often participants go out is positively correlated with chance to match, though fewer participants answered that they go out rarely. Examining gender effects, women seem more likely than men to match if they go out once a week or less, while men and women are equally likely to match if they go out twice a week, and men are most likely to match if they go out three or more times a week. Whether the participants are the same race does not seem to significantly impact their chance of matching, though those of the same race are slightly more likely to pursue and be pursued to match if they go out more than twice a month, while participants going out less than twice a month are more likely to pursue matches of a different race or ethnicity.

|    How often participants go out on dates seems to be more heavily positively correlated with chance to match. Considering gender, men seem more likely to match if they go out on dates twice a month or more, while women were more likely to match compared to men if they went out less than twice a month. Whether or not participants were of the same race did not seem to impact their chance of matching based on how often they go on dates, however, participants going on dates very little or very often seemed to be pursued more by those of the same race or ethnicity.

------------------------------------------------------------------------

### Data showcase 2: Importance of Physical Attractiveness and Self-Rating of Attractiveness

#### Visualization

```{r echo=FALSE, message=FALSE, warning=FALSE}
# load in libraries
library(tidyverse)
library(Hmisc)

# get data to analyze
data_path <- "speed_dating_data.csv"
spd_dat <- read.csv(data_path)
spddat <- subset(spd_dat, select=c(iid, gender, attr1_1, attr3_1))

# get pearson's r and p value for data
spddat.rcorr = rcorr(as.matrix(spddat))
spddat.coeff = spddat.rcorr$r
spddat.p = spddat.rcorr$P
coeff = data.frame(spddat.coeff)
p = data.frame(spddat.p)

# print wanted correlation coefficient and p value
coeff <- subset(coeff, select=c(attr1_1))
coeff <- coeff[!(row.names(coeff) %in% c("iid", "gender")),]
p <- subset(p, select=c(attr1_1))
p <- p[!(row.names(p) %in% c("iid", "gender")),]
#print(coeff)
#print(p)

# preprocess data to remove nas and recode
spddat <- na.omit(spddat)
spddat <- unique(spddat)
spddat %>% mutate(gender = recode(gender,
                                  '0' = "Women",
                                  '1' = "Men")) -> spddat

# 2d contour plot
p <- ggplot(spddat, aes(attr3_1, attr1_1, color=gender)) +
  geom_density_2d() +
  labs(title = "Physical attractiveness preference vs. self-perception") +
  scale_colour_discrete(labels=c("Men", "Women"), type=c("#d01c8b", "#4dac26")) +
  scale_x_continuous(breaks=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)) +
  labs(title = "Physical Attractiveness",
       subtitle = "Do participants' self-ratings impact their preferences?",
       colour = "Gender") +
  xlab("Self-Rating from 1-10") +
  ylab("Weight in Decision to Match (%)") +
  annotate("label", label="Pearson's r = 0.18, p < .001", x=5.5, y=40, family="Avenir") +
  theme_light() +
  theme(text = element_text(family="Avenir"))
ggplotly(p)
```

#### Narrative

|   Based on the correlation coefficient, self-rated attractiveness and weight of attractiveness in preference are weakly correlated. However, this correlation is very unlikely to be due to data noise from the p-value being less than 0.001. The contours show that men tend to rate attractiveness as more important to their match decisions to match compared to women, and the highest density of men rated themselves a 7 out of 10 in attractiveness. Women, however, tended to rate themselves as a 7 or 8 in attractiveness, and rated attractiveness as having a 15-20% weight in match decisions. This figure could be interpreted as men valuing attractiveness more in their partners but being slightly less confident in their own appearance compared to women, and both genders rating attractiveness as slightly more important if they view themselves as attractive.

------------------------------------------------------------------------

### Data showcase 3: Importance of Shared Interests Over Time and Match

#### Visualization

```{r echo=FALSE, message=FALSE, warning=FALSE}
# load in libraries
library(tidyverse)

# get data to analyze
data_path <- "speed_dating_data.csv"
spddat <- read.csv(data_path)
spddat <- subset(spddat, select=c(shar1_1, shar1_s, shar1_2, shar1_3, match))

spddat <- data.frame(time=c("Before", "During", "Days After", "Weeks After",
                           "Before", "During", "Days After", "Weeks After"),
                     match=c(0, 0, 0, 0,
                            1, 1, 1, 1),
                     shar_imp=c(mean(spddat[!is.na(spddat$shar1_1) & spddat$match == 0,]$shar1_1),
                                mean(spddat[!is.na(spddat$shar1_s) & spddat$match == 0,]$shar1_s),
                                mean(spddat[!is.na(spddat$shar1_2) & spddat$match == 0,]$shar1_2),
                                mean(spddat[!is.na(spddat$shar1_3) & spddat$match == 0,]$shar1_3),
                                mean(spddat[!is.na(spddat$shar1_1) & spddat$match == 1,]$shar1_1),
                                mean(spddat[!is.na(spddat$shar1_s) & spddat$match == 1,]$shar1_s),
                                mean(spddat[!is.na(spddat$shar1_2) & spddat$match == 1,]$shar1_2),
                                mean(spddat[!is.na(spddat$shar1_3) & spddat$match == 1,]$shar1_3)))

spddat %>% mutate(match = recode(match,
                                  '0' = "Did Not Match",
                                  '1' = "Matched")) -> spddat

# create plot
p <- ggplot(spddat, aes(x=time, y=shar_imp, group=match, colour=match, shape=match)) +
  geom_line() +
  geom_point() +
  scale_x_discrete(limits=c("Before", "During", "Days After", "Weeks After")) +
  scale_colour_discrete(type=c("#7b3494", "#008837")) +
  scale_shape_manual(values=c(17, 15)) +
  labs(title = "Importance of Shared Interests Grouped By Match",
       subtitle = "Are participants who value shared interests more picky?",
       colour = "Match",
       shape = "Match") +
  xlab("Time Surveyed") +
  ylab("Importance of Shared Interests (%)") +
  theme_light() +
  theme(text = element_text(family="Avenir")) +
  ylim(c(11, 13))
ggplotly(p)
```

#### Narrative

|   Rated importance of shared interests tends to increase over time for both groups and those who matched tended to rate shared interests as less important than those who did not match. Perhaps participants who rated shared interest as more important were more "picky" then other participants, making them less likely to match. The increase in rated importance of shared interests in a partner over time after the speed dating event can be potentially interpreted as a learning curve where participants, after reflecting on their matches, found that shared interests were more important to compatibility than they originally believed.

------------------------------------------------------------------------

### Data showcase 4: Preference For Race and Religion Between Gender